<script src="/js/mapgraph.js"></script>
<script>
	MapGraph({
		colors:[0xaaaaaa,0x224422,0x226622,0x228822,0x22aa22,0x22cc22,0x22ee22],
		selector:'#graphmap',
		datas:<%- JSON.stringify(playdatas) %>.map(d=>{
			return {
				date:d.updatedAt,
				value:d.allplaycount,
				html:`<div>${d.name}</div>`
			}
		})
	})
</script>
<%- include('./head') %>
<div class="container">
	<div class="row">
        <div class="col-md-2 sidebar">
            <%- include('./navsidebar') %>
        </div>
		<div class="col-md-10 col-sm-10 data">
			<div id="graphmap"></div>
			<table id="foo-table" class="table table-bordered">
				<thead>
					<tr>
						<th>日付</th>
						<th>データ名</th>
						<th>台名</th>
						<th>総ゲーム数</th>
						<th>ゲーム数</th>
						<th>C1</th>
						<th>C2</th>
						<th>C3</th>
						<th>C4</th>
					</tr>
				</thead>
				<tbody>
					<% playdatas.forEach((q)=>{ %>
						<% var data = q.dataValues %>
						<% var timestamp = data.updatedAt %>
						<tr>
							<td><%= [timestamp.getFullYear(),timestamp.getMonth() + 1,timestamp.getDate()].join( '/' );%></td>
							<td><%= data.name %></td>
							<td><%= data.slotname %></td>
							<td><%= data.allplaycount %></td>
							<td><%= data.playcount %></td>
							<% var arr = data.count.split(',')%>
							<% for(var i=0;i<4;i++){%>
								<td><%= arr[i]||0%></td>
							<% }%>
						</tr>
					<% }) %>
				</tbody>
			</table>
	</div>
</div>
<%- include('./foot') %>